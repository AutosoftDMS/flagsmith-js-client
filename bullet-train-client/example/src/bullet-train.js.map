{"version":3,"sources":["webpack://bullet-train/webpack/universalModuleDefinition","webpack://bullet-train/webpack/bootstrap","webpack://bullet-train/./bullet-train-core.js","webpack://bullet-train/./node_modules/whatwg-fetch/fetch.js","webpack://bullet-train/./node_modules/is-obj/index.js","webpack://bullet-train/./node_modules/deep-assign/index.js","webpack://bullet-train/./async-storage.js","webpack://bullet-train/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","fetch","AsyncStorage","BULLET_TRAIN_KEY","BulletTrain","props","_this","this","_classCallCheck","getJSON","url","method","environmentID","console","log","headers","x-environment-key","then","res","json","getFlags","onChange","onError","identity","api","disableCache","handleResponse","flags","forEach","feature","toLowerCase","replace","enabled","feature_state_value","oldFlags","setItem","JSON","stringify","isFromServer","catch","_ref","message","_ref2","getValue","flag","hasFeature","_createClass","_ref3","_this2","_ref3$api","undefined","defaultFlags","interval","assign","initialised","getItem","err","parse","userId","ticks","arguments","length","setInterval","clearInterval","_ref4","self","support","searchParams","iterable","blob","Blob","e","formData","arrayBuffer","viewClasses","isDataView","obj","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","toString","Headers","append","normalizeName","normalizeValue","oldValue","map","has","set","callback","thisArg","keys","items","push","iteratorFor","values","entries","iterator","methods","Request","clone","body","_bodyInit","Body","Response","status","statusText","error","response","type","redirectStatuses","redirect","RangeError","location","input","init","Promise","resolve","reject","request","xhr","XMLHttpRequest","onload","rawHeaders","options","getAllResponseHeaders","split","line","parts","shift","trim","join","responseURL","responseText","onerror","TypeError","ontimeout","open","credentials","withCredentials","responseType","setRequestHeader","send","polyfill","String","test","next","done","Array","isArray","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","slice","view","Uint8Array","byteLength","buffer","_initBody","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","Error","rejected","text","readAsText","chars","fromCharCode","readArrayBufferAsText","decode","upcased","toUpperCase","referrer","form","bytes","decodeURIComponent","bodyInit","ok","x","isObj","propIsEnumerable","propertyIsEnumerable","assignKey","to","from","val","getOwnPropertySymbols","symbols","target","toObject","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","require","deep_assign_1","createPromise","createPromiseAll","promises","processResult","all","errors","clear","localStorage","getAllKeys","numberOfKeys","multiGet","multiSet","keyValuePairs","item","mergeItem","oldObject","newObject","nextValue","default","mergeLocalStorageItem","multiMerge","removeItem","multiRemove","apply","_asyncStorage","bulletTrain","bt"],"mappings":"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","file":"bullet-train.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bullet-train\"] = factory();\n\telse\n\t\troot[\"bullet-train\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","let fetch;\nlet AsyncStorage;\nconst BULLET_TRAIN_KEY = \"BULLET_TRAIN_DB\";\n\nconst BulletTrain = class {\n\n    constructor(props) {\n        fetch = props.fetch;\n        AsyncStorage = props.AsyncStorage;\n    }\n\n    getJSON = (url, method) => {\n        const {environmentID} = this;\n        console.log(url, environmentID)\n        return fetch(url + '?format=json', {\n            method: method || 'GET',\n            headers: {\n                'x-environment-key': environmentID\n            }\n        })\n            .then(res => res.json());\n    };\n\n    getFlags = () => {\n        const {onChange, onError, identity, api, disableCache} = this;\n\n        const handleResponse = (res) => {\n            // Handle server response\n            let flags = {};\n            res.forEach(feature => {\n                flags[feature.feature.name.toLowerCase().replace(/ /g, '_')] = {\n                    enabled: feature.enabled,\n                    value: feature.feature_state_value\n                };\n            });\n            this.oldFlags = flags;\n            this.flags = flags;\n            if (!disableCache) {\n                AsyncStorage.setItem(BULLET_TRAIN_KEY, JSON.stringify(this.flags))\n            }\n            onChange && onChange(this.oldFlags, {isFromServer: true});\n        };\n\n        if (identity) {\n            return this.getJSON(api + 'flags/' + identity)\n                .then(res => {\n                    handleResponse(res)\n                }).catch(({message}) => {\n                    onError && onError({message})\n                });\n        } else {\n            return this.getJSON(api + \"flags/\")\n                .then(res => {\n                    handleResponse(res)\n                }).catch(({message}) => {\n                    onError && onError({message})\n                });\n        }\n    };\n\n    init({\n             environmentID,\n             api = 'https://api.bullet-train.io/api/v1/',\n             onChange,\n             disableCache,\n             onError,\n             defaultFlags\n         }) {\n\n        this.environmentID = environmentID;\n        this.api = api;\n        this.interval = null;\n        this.disableCache = disableCache;\n        this.onChange = onChange;\n        this.onError = onError;\n        this.flags = Object.assign({}, defaultFlags) || {};\n        this.initialised = true;\n\n        if (!environmentID) {\n            throw('Please specify a environment id');\n        }\n        if (!onChange) {\n            throw('Please specify an onChange event');\n        }\n\n        //If the user specified default flags emit a changed event immediately\n\n        if (!disableCache) {\n            AsyncStorage.getItem(BULLET_TRAIN_KEY, (err, res) => {\n                this.flags = res ? JSON.parse(res) : defaultFlags;\n                if (this.flags) {\n                    onChange(null, {isFromServer: false});\n                }\n                this.getFlags();\n            });\n        }\n    }\n\n    getAllFlags() {\n        return this.flags;\n    }\n\n    identify(userId) {\n        this.identity = userId;\n        if (this.initialised && !this.interval)\n            this.getFlags();\n    }\n\n    logout() {\n        this.identity = null;\n        if (this.initialised && !this.interval)\n            this.getFlags();\n    }\n\n    startListening(ticks = 1000) {\n        if (this.interval) {\n            return;\n        }\n        this.interval = setInterval(this.getFlags, ticks);\n    }\n\n    stopListening() {\n        clearInterval(this.interval);\n    }\n\n    getValue = (key) => {\n        const flag = this.flags && this.flags[key];\n        let res = null;\n        if (flag) {\n            res = flag.value;\n        }\n        //todo record check for value\n\n        return res;\n    }\n\n\n    hasFeature = (key) => {\n        const flag = this.flags && this.flags[key];\n        let res = false;\n        if (flag && flag.enabled) {\n            res = true;\n        }\n        //todo record check for feature\n\n        return res;\n    }\n\n};\n\nmodule.exports = function ({fetch, AsyncStorage}) {\n    return new BulletTrain({fetch, AsyncStorage});\n};\n\n\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","/**\n * Copyright (c) 2015-present, Nicolas Gallagher.\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule AsyncStorage\n * @flow\n */\ndefine([\"require\", \"exports\", \"deep-assign\"], function (require, exports, deep_assign_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var mergeLocalStorageItem = function (key, value) {\n        var oldValue = window.localStorage.getItem(key);\n        var oldObject = JSON.parse(oldValue);\n        var newObject = JSON.parse(value);\n        var nextValue = JSON.stringify(deep_assign_1.default({}, oldObject, newObject));\n        window.localStorage.setItem(key, nextValue);\n    };\n    var createPromise = function (getValue, callback) {\n        return new Promise(function (resolve, reject) {\n            try {\n                var value = getValue();\n                if (callback) {\n                    callback(null, value);\n                }\n                resolve(value);\n            }\n            catch (err) {\n                if (callback) {\n                    callback(err);\n                }\n                reject(err);\n            }\n        });\n    };\n    var createPromiseAll = function (promises, callback, processResult) {\n        return Promise.all(promises).then(function (result) {\n            var value = processResult ? processResult(result) : null;\n            callback && callback(null, value);\n            return Promise.resolve(value);\n        }, function (errors) {\n            callback && callback(errors);\n            return Promise.reject(errors);\n        });\n    };\n    var AsyncStorage = /** @class */ (function () {\n        function AsyncStorage() {\n        }\n        /**\n         * Erases *all* AsyncStorage for the domain.\n         */\n        AsyncStorage.clear = function (callback) {\n            return createPromise(function () {\n                window.localStorage.clear();\n            }, callback);\n        };\n        /**\n         * Gets *all* keys known to the app, for all callers, libraries, etc.\n         */\n        AsyncStorage.getAllKeys = function (callback) {\n            return createPromise(function () {\n                var numberOfKeys = window.localStorage.length;\n                var keys = [];\n                for (var i = 0; i < numberOfKeys; i += 1) {\n                    var key = window.localStorage.key(i);\n                    keys.push(key);\n                }\n                return keys;\n            }, callback);\n        };\n        /**\n         * Fetches `key` value.\n         */\n        AsyncStorage.getItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.getItem(key);\n            }, callback);\n        };\n        /**\n         * multiGet resolves to an array of key-value pair arrays that matches the\n         * input format of multiSet.\n         *\n         *   multiGet(['k1', 'k2']) -> [['k1', 'val1'], ['k2', 'val2']]\n         */\n        AsyncStorage.multiGet = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.getItem(key); });\n            var processResult = function (result) { return result.map(function (value, i) { return [keys[i], value]; }); };\n            return createPromiseAll(promises, callback, processResult);\n        };\n        /**\n         * Sets `value` for `key`.\n         */\n        AsyncStorage.setItem = function (key, value, callback) {\n            return createPromise(function () {\n                window.localStorage.setItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs.\n         *   multiSet([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiSet = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.setItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Merges existing value with input value, assuming they are stringified JSON.\n         */\n        AsyncStorage.mergeItem = function (key, value, callback) {\n            return createPromise(function () {\n                mergeLocalStorageItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs and merges them with existing\n         * values, assuming they are stringified JSON.\n         *\n         *   multiMerge([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiMerge = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.mergeItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Removes a `key`\n         */\n        AsyncStorage.removeItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.removeItem(key);\n            }, callback);\n        };\n        /**\n         * Delete all the keys in the `keys` array.\n         */\n        AsyncStorage.multiRemove = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.removeItem(key); });\n            return createPromiseAll(promises, callback);\n        };\n        return AsyncStorage;\n    }());\n    module.exports = AsyncStorage;\n});\n","import AsyncStorage from './async-storage';\nrequire('whatwg-fetch');\nconst bt = require('./bullet-train-core');\nconst bulletTrain = bt({AsyncStorage, fetch: window.fetch});\nwindow.bulletTrain = bulletTrain;\nmodule.exports = bulletTrain;"],"sourceRoot":""}