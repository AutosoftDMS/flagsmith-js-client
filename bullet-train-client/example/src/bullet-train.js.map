{"version":3,"sources":["webpack://bullet-train/webpack/universalModuleDefinition","webpack://bullet-train/webpack/bootstrap","webpack://bullet-train/./bullet-train-core.js","webpack://bullet-train/./node_modules/whatwg-fetch/fetch.js","webpack://bullet-train/./node_modules/is-obj/index.js","webpack://bullet-train/./node_modules/deep-assign/index.js","webpack://bullet-train/./async-storage.js","webpack://bullet-train/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","fetch","AsyncStorage","BULLET_TRAIN_KEY","BulletTrain","props","_this","this","_classCallCheck","getJSON","url","method","environmentID","console","log","headers","x-environment-key","then","res","json","getFlags","onChange","onError","identity","api","disableCache","handleResponse","flags","forEach","feature","toLowerCase","replace","enabled","feature_state_value","oldFlags","setItem","JSON","stringify","isFromServer","catch","_ref","message","_ref2","_createClass","_ref3","_this2","_ref3$api","undefined","defaultFlags","interval","assign","initialised","getItem","err","parse","userId","ticks","arguments","length","setInterval","clearInterval","flag","_ref4","self","support","searchParams","iterable","blob","Blob","e","formData","arrayBuffer","viewClasses","isDataView","obj","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","toString","Headers","append","normalizeName","normalizeValue","oldValue","map","has","set","callback","thisArg","keys","items","push","iteratorFor","values","entries","iterator","methods","Request","clone","body","_bodyInit","Body","Response","status","statusText","error","response","type","redirectStatuses","redirect","RangeError","location","input","init","Promise","resolve","reject","request","xhr","XMLHttpRequest","onload","rawHeaders","options","getAllResponseHeaders","split","line","parts","shift","trim","join","responseURL","responseText","onerror","TypeError","ontimeout","open","credentials","withCredentials","responseType","setRequestHeader","send","polyfill","String","test","next","done","Array","isArray","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","slice","view","Uint8Array","byteLength","buffer","_initBody","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","Error","rejected","text","readAsText","chars","fromCharCode","readArrayBufferAsText","decode","upcased","toUpperCase","referrer","form","bytes","decodeURIComponent","bodyInit","ok","x","isObj","propIsEnumerable","propertyIsEnumerable","assignKey","to","from","val","getOwnPropertySymbols","symbols","target","toObject","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","require","deep_assign_1","createPromise","getValue","createPromiseAll","promises","processResult","all","errors","clear","localStorage","getAllKeys","numberOfKeys","multiGet","multiSet","keyValuePairs","item","mergeItem","oldObject","newObject","nextValue","default","mergeLocalStorageItem","multiMerge","removeItem","multiRemove","apply","_asyncStorage","bulletTrain","bt"],"mappings":"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","file":"bullet-train.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bullet-train\"] = factory();\n\telse\n\t\troot[\"bullet-train\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","let fetch;\nlet AsyncStorage;\nconst BULLET_TRAIN_KEY = \"BULLET_TRAIN_DB\";\n\nconst BulletTrain = class {\n\n    constructor(props) {\n        fetch = props.fetch;\n        AsyncStorage = props.AsyncStorage;\n    }\n\n    getJSON = (url, method) => {\n        const {environmentID} = this;\n        console.log(url, environmentID)\n        return fetch(url + '?format=json', {\n            method: method || 'GET',\n            headers: {\n                'x-environment-key': environmentID\n            }\n        })\n            .then(res => res.json());\n    };\n\n    getFlags = () => {\n        const {onChange, onError, identity, api, disableCache} = this;\n\n        const handleResponse = (res) => {\n            // Handle server response\n            let flags = {};\n            res.forEach(feature => {\n                flags[feature.feature.name.toLowerCase().replace(/ /g, '_')] = {\n                    enabled: feature.enabled,\n                    value: feature.feature_state_value\n                };\n            });\n            this.oldFlags = flags;\n            this.flags = flags;\n            if (!disableCache) {\n                AsyncStorage.setItem(BULLET_TRAIN_KEY, JSON.stringify(this.flags))\n            }\n            onChange && onChange(this.oldFlags, {isFromServer: true});\n        };\n\n        if (identity) {\n            return this.getJSON(api + 'flags/' + identity)\n                .then(res => {\n                    handleResponse(res)\n                }).catch(({message}) => {\n                    onError && onError({message})\n                });\n        } else {\n            return this.getJSON(api + \"flags/\")\n                .then(res => {\n                    handleResponse(res)\n                }).catch(({message}) => {\n                    onError && onError({message})\n                });\n        }\n    };\n\n    init({\n             environmentID,\n             api = 'https://bullet-train-api-dev.dokku1.solidstategroup.com/api/v1/',\n             onChange,\n             disableCache,\n             onError,\n             defaultFlags\n         }) {\n\n        this.environmentID = environmentID;\n        this.api = api;\n        this.interval = null;\n        this.disableCache = disableCache;\n        this.onChange = onChange;\n        this.onError = onError;\n        this.flags = Object.assign({}, defaultFlags) || {};\n        this.initialised = true;\n\n        if (!environmentID) {\n            throw('Please specify a environment id');\n        }\n        if (!onChange) {\n            throw('Please specify an onChange event');\n        }\n\n        //If the user specified default flags emit a changed event immediately\n\n        if (!disableCache) {\n            AsyncStorage.getItem(BULLET_TRAIN_KEY, (err, res)=> {\n                this.flags = res ? JSON.parse(res) : defaultFlags;\n                if (this.flags) {\n                    onChange(null, {isFromServer: false});\n                }\n                this.getFlags();\n            });\n        }\n    }\n\n    getAllFlags() {\n        return this.flags;\n    }\n\n    identify(userId) {\n        this.identity = userId;\n        if (this.initialised && !this.interval)\n            this.getFlags();\n    }\n\n    logout() {\n        this.identity = null;\n        if (this.initialised && !this.interval)\n            this.getFlags();\n    }\n\n    startListening(ticks = 1000) {\n        if (this.interval) {\n            return;\n        }\n        this.interval = setInterval(this.getFlags, ticks);\n    }\n\n    stopListening() {\n        clearInterval(this.interval);\n    }\n\n    getValue(key) {\n        const flag = this.flags[key];\n        let res = null;\n        if (flag && flag.enabled) {\n            res = flag.value;\n        }\n        //todo record check for value\n\n        return res;\n    }\n\n\n    hasFeature(key) {\n        const flag = this.flags[key];\n        let res = false;\n        if (flag && flag.enabled) {\n            res = true;\n        }\n        //todo record check for feature\n\n        return res;\n    }\n\n};\n\nmodule.exports = function ({fetch, AsyncStorage}) {\n    return new BulletTrain({fetch, AsyncStorage});\n};\n\n\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","/**\n * Copyright (c) 2015-present, Nicolas Gallagher.\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule AsyncStorage\n * @flow\n */\ndefine([\"require\", \"exports\", \"deep-assign\"], function (require, exports, deep_assign_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var mergeLocalStorageItem = function (key, value) {\n        var oldValue = window.localStorage.getItem(key);\n        var oldObject = JSON.parse(oldValue);\n        var newObject = JSON.parse(value);\n        var nextValue = JSON.stringify(deep_assign_1.default({}, oldObject, newObject));\n        window.localStorage.setItem(key, nextValue);\n    };\n    var createPromise = function (getValue, callback) {\n        return new Promise(function (resolve, reject) {\n            try {\n                var value = getValue();\n                if (callback) {\n                    callback(null, value);\n                }\n                resolve(value);\n            }\n            catch (err) {\n                if (callback) {\n                    callback(err);\n                }\n                reject(err);\n            }\n        });\n    };\n    var createPromiseAll = function (promises, callback, processResult) {\n        return Promise.all(promises).then(function (result) {\n            var value = processResult ? processResult(result) : null;\n            callback && callback(null, value);\n            return Promise.resolve(value);\n        }, function (errors) {\n            callback && callback(errors);\n            return Promise.reject(errors);\n        });\n    };\n    var AsyncStorage = /** @class */ (function () {\n        function AsyncStorage() {\n        }\n        /**\n         * Erases *all* AsyncStorage for the domain.\n         */\n        AsyncStorage.clear = function (callback) {\n            return createPromise(function () {\n                window.localStorage.clear();\n            }, callback);\n        };\n        /**\n         * Gets *all* keys known to the app, for all callers, libraries, etc.\n         */\n        AsyncStorage.getAllKeys = function (callback) {\n            return createPromise(function () {\n                var numberOfKeys = window.localStorage.length;\n                var keys = [];\n                for (var i = 0; i < numberOfKeys; i += 1) {\n                    var key = window.localStorage.key(i);\n                    keys.push(key);\n                }\n                return keys;\n            }, callback);\n        };\n        /**\n         * Fetches `key` value.\n         */\n        AsyncStorage.getItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.getItem(key);\n            }, callback);\n        };\n        /**\n         * multiGet resolves to an array of key-value pair arrays that matches the\n         * input format of multiSet.\n         *\n         *   multiGet(['k1', 'k2']) -> [['k1', 'val1'], ['k2', 'val2']]\n         */\n        AsyncStorage.multiGet = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.getItem(key); });\n            var processResult = function (result) { return result.map(function (value, i) { return [keys[i], value]; }); };\n            return createPromiseAll(promises, callback, processResult);\n        };\n        /**\n         * Sets `value` for `key`.\n         */\n        AsyncStorage.setItem = function (key, value, callback) {\n            return createPromise(function () {\n                window.localStorage.setItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs.\n         *   multiSet([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiSet = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.setItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Merges existing value with input value, assuming they are stringified JSON.\n         */\n        AsyncStorage.mergeItem = function (key, value, callback) {\n            return createPromise(function () {\n                mergeLocalStorageItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs and merges them with existing\n         * values, assuming they are stringified JSON.\n         *\n         *   multiMerge([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiMerge = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.mergeItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Removes a `key`\n         */\n        AsyncStorage.removeItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.removeItem(key);\n            }, callback);\n        };\n        /**\n         * Delete all the keys in the `keys` array.\n         */\n        AsyncStorage.multiRemove = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.removeItem(key); });\n            return createPromiseAll(promises, callback);\n        };\n        return AsyncStorage;\n    }());\n    module.exports = AsyncStorage;\n});\n","import AsyncStorage from './async-storage';\nrequire('whatwg-fetch');\nconst bt = require('./bullet-train-core');\nconst bulletTrain = bt({AsyncStorage, fetch: window.fetch});\nwindow.bulletTrain = bulletTrain;\nmodule.exports = bulletTrain;"],"sourceRoot":""}