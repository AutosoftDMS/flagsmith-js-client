{"version":3,"sources":["webpack://bullet-train/webpack/universalModuleDefinition","webpack://bullet-train/webpack/bootstrap","webpack://bullet-train/./async-storage.js","webpack://bullet-train/./bullet-train-core.js","webpack://bullet-train/./index.js","webpack://bullet-train/./node_modules/deep-assign/index.js","webpack://bullet-train/./node_modules/is-obj/index.js","webpack://bullet-train/./node_modules/whatwg-fetch/fetch.js"],"names":["require","exports","deep_assign_1","Object","defineProperty","value","mergeLocalStorageItem","key","oldValue","window","localStorage","getItem","oldObject","JSON","parse","newObject","nextValue","stringify","default","setItem","createPromise","getValue","callback","Promise","resolve","reject","err","createPromiseAll","promises","processResult","all","then","result","errors","AsyncStorage","clear","getAllKeys","numberOfKeys","length","keys","i","push","multiGet","map","multiSet","keyValuePairs","item","mergeItem","multiMerge","removeItem","multiRemove","module","fetch","BULLET_TRAIN_KEY","getJSON","url","method","flagger","environmentID","console","log","headers","res","json","getFlags","onChange","onError","identity","api","disableCache","handleResponse","flags","forEach","feature","name","toLowerCase","replace","enabled","oldFlags","isFromServer","catch","message","BulletTrain","props","defaultFlags","interval","assign","initialised","userId","ticks","setInterval","clearInterval","flag","bt"],"mappings":"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CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;AACA;;AAEA;AACA;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,kCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,wCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD,SAAS;AACT;AACA,SAAS;AACT,8EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,uBAAuB;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA,CAAC","file":"bullet-train.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bullet-train\"] = factory();\n\telse\n\t\troot[\"bullet-train\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","/**\n * Copyright (c) 2015-present, Nicolas Gallagher.\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule AsyncStorage\n * @flow\n */\ndefine([\"require\", \"exports\", \"deep-assign\"], function (require, exports, deep_assign_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var mergeLocalStorageItem = function (key, value) {\n        var oldValue = window.localStorage.getItem(key);\n        var oldObject = JSON.parse(oldValue);\n        var newObject = JSON.parse(value);\n        var nextValue = JSON.stringify(deep_assign_1.default({}, oldObject, newObject));\n        window.localStorage.setItem(key, nextValue);\n    };\n    var createPromise = function (getValue, callback) {\n        return new Promise(function (resolve, reject) {\n            try {\n                var value = getValue();\n                if (callback) {\n                    callback(null, value);\n                }\n                resolve(value);\n            }\n            catch (err) {\n                if (callback) {\n                    callback(err);\n                }\n                reject(err);\n            }\n        });\n    };\n    var createPromiseAll = function (promises, callback, processResult) {\n        return Promise.all(promises).then(function (result) {\n            var value = processResult ? processResult(result) : null;\n            callback && callback(null, value);\n            return Promise.resolve(value);\n        }, function (errors) {\n            callback && callback(errors);\n            return Promise.reject(errors);\n        });\n    };\n    var AsyncStorage = /** @class */ (function () {\n        function AsyncStorage() {\n        }\n        /**\n         * Erases *all* AsyncStorage for the domain.\n         */\n        AsyncStorage.clear = function (callback) {\n            return createPromise(function () {\n                window.localStorage.clear();\n            }, callback);\n        };\n        /**\n         * Gets *all* keys known to the app, for all callers, libraries, etc.\n         */\n        AsyncStorage.getAllKeys = function (callback) {\n            return createPromise(function () {\n                var numberOfKeys = window.localStorage.length;\n                var keys = [];\n                for (var i = 0; i < numberOfKeys; i += 1) {\n                    var key = window.localStorage.key(i);\n                    keys.push(key);\n                }\n                return keys;\n            }, callback);\n        };\n        /**\n         * Fetches `key` value.\n         */\n        AsyncStorage.getItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.getItem(key);\n            }, callback);\n        };\n        /**\n         * multiGet resolves to an array of key-value pair arrays that matches the\n         * input format of multiSet.\n         *\n         *   multiGet(['k1', 'k2']) -> [['k1', 'val1'], ['k2', 'val2']]\n         */\n        AsyncStorage.multiGet = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.getItem(key); });\n            var processResult = function (result) { return result.map(function (value, i) { return [keys[i], value]; }); };\n            return createPromiseAll(promises, callback, processResult);\n        };\n        /**\n         * Sets `value` for `key`.\n         */\n        AsyncStorage.setItem = function (key, value, callback) {\n            return createPromise(function () {\n                window.localStorage.setItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs.\n         *   multiSet([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiSet = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.setItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Merges existing value with input value, assuming they are stringified JSON.\n         */\n        AsyncStorage.mergeItem = function (key, value, callback) {\n            return createPromise(function () {\n                mergeLocalStorageItem(key, value);\n            }, callback);\n        };\n        /**\n         * Takes an array of key-value array pairs and merges them with existing\n         * values, assuming they are stringified JSON.\n         *\n         *   multiMerge([['k1', 'val1'], ['k2', 'val2']])\n         */\n        AsyncStorage.multiMerge = function (keyValuePairs, callback) {\n            var promises = keyValuePairs.map(function (item) { return AsyncStorage.mergeItem(item[0], item[1]); });\n            return createPromiseAll(promises, callback);\n        };\n        /**\n         * Removes a `key`\n         */\n        AsyncStorage.removeItem = function (key, callback) {\n            return createPromise(function () {\n                return window.localStorage.removeItem(key);\n            }, callback);\n        };\n        /**\n         * Delete all the keys in the `keys` array.\n         */\n        AsyncStorage.multiRemove = function (keys, callback) {\n            var promises = keys.map(function (key) { return AsyncStorage.removeItem(key); });\n            return createPromiseAll(promises, callback);\n        };\n        return AsyncStorage;\n    }());\n    module.exports = AsyncStorage;\n});\n","let fetch;\nlet AsyncStorage;\nconst BULLET_TRAIN_KEY = \"BULLET_TRAIN_DB\";\n\nconst getJSON = (url, method) => {\n    const {environmentID} = flagger;\n    console.log(url, environmentID)\n    return fetch(url + '?format=json', {\n        method: method || 'GET',\n        headers: {\n            'x-environment-key': environmentID\n        }\n    })\n        .then(res => res.json());\n};\n\nconst getFlags = () => {\n    const {onChange, onError, identity, api, disableCache} = flagger;\n\n    const handleResponse = (res) => {\n        // Handle server response\n        let flags = {};\n        res.forEach(feature => {\n            flags[feature.feature.name.toLowerCase().replace(/ /g, '_')] = {\n                enabled: feature.enabled,\n                value: feature.value\n            };\n        });\n        flagger.oldFlags = flags;\n        flagger.flags = flags;\n        if (!disableCache) {\n            AsyncStorage.setItem(BULLET_TRAIN_KEY, JSON.stringify(flagger.flags))\n        }\n        onChange && onChange(flagger.oldFlags, {isFromServer: true});\n    };\n\n    if (identity) {\n        return getJSON(api + 'flags/' + identity)\n            .then(res => {\n                handleResponse(res)\n            }).catch(({message}) => {\n                onError && onError({message})\n            });\n    } else {\n        return getJSON(api + \"flags/\")\n            .then(res => {\n                handleResponse(res)\n            }).catch(({message}) => {\n                onError && onError({message})\n            });\n    }\n};\n\nconst BulletTrain = class {\n\n    constructor(props) {\n        fetch = props.fetch;\n        AsyncStorage = props.AsyncStorage;\n    }\n\n    init({\n             environmentID,\n             api = 'https://bullet-train-api-dev.dokku1.solidstategroup.com/api/v1/',\n             onChange,\n             disableCache,\n             onError,\n             defaultFlags\n         }) {\n\n        this.environmentID = environmentID;\n        this.api = api;\n        this.interval = null;\n        this.disableCache = disableCache;\n        this.onChange = onChange;\n        this.onError = onError;\n        this.flags = Object.assign({}, defaultFlags) || {};\n        this.initialised = true;\n\n        if (!environmentID) {\n            throw('Please specify a environment id');\n        }\n        if (!onChange) {\n            throw('Please specify an onChange event');\n        }\n\n        //If the user specified default flags emit a changed event immediately\n\n        if (!disableCache) {\n            AsyncStorage.getItem(BULLET_TRAIN_KEY, function (err, res) {\n                flagger.flags = res ? JSON.parse(res) : defaultFlags;\n                if (flagger.flags) {\n                    onChange(null, {isFromServer: false});\n                }\n                getFlags();\n            });\n        }\n    }\n\n    getAllFlags() {\n        return this.flags;\n    }\n\n    identify(userId) {\n        this.identity = userId;\n        if (this.initialised && !this.interval)\n            getFlags();\n    }\n\n    logout() {\n        this.identity = null;\n        if (this.initialised && !this.interval)\n            getFlags();\n    }\n\n    startListening(ticks = 1000) {\n        if (this.interval) {\n            return;\n        }\n        this.interval = setInterval(getFlags, ticks);\n    }\n\n    stopListening() {\n        clearInterval(this.interval);\n    }\n\n    getValue(key) {\n        const flag = this.flags[key];\n        let res = null;\n        if (flag && flag.enabled) {\n            res = flag.value;\n        }\n        //todo record check for value\n\n        return res;\n    }\n\n\n    hasFeature(key) {\n        const flag = this.flags[key];\n        let res = false;\n        if (flag && flag.enabled) {\n            res = true;\n        }\n        //todo record check for feature\n\n        return res;\n    }\n\n};\n\nmodule.exports = function ({fetch, AsyncStorage}) {\n    return new BulletTrain({fetch, AsyncStorage});\n};\n\n\n","import AsyncStorage from './async-storage';\nrequire('whatwg-fetch');\nconst bt = require('./bullet-train-core');\nmodule.exports = bt({AsyncStorage, fetch: window.fetch});","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n"],"sourceRoot":""}